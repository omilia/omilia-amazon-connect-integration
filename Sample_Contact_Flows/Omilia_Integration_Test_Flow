{"modules":[{"id":"a427d3d8-058e-4f22-84e6-f28af4a226e4","type":"SetAttributes","branches":[{"condition":"Success","transition":"b23ff4a1-220a-42d6-abb9-bf015ec4aa8e"},{"condition":"Error","transition":"ccebc353-7ee1-4c1d-9461-40701542a8f7"}],"parameters":[{"name":"Attribute","value":"phone_number","key":"omilia_number","namespace":"External"}],"metadata":{"position":{"x":605,"y":339},"dynamicParams":["omilia_number"]}},{"id":"ccebc353-7ee1-4c1d-9461-40701542a8f7","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":1108,"y":725}}},{"id":"a677fae7-dd0d-412d-a5e7-1d7c5036a347","type":"PlayPrompt","branches":[{"condition":"Success","transition":"406d878c-83a9-461d-b616-620d3d65858c"},{"condition":"Error","transition":"ccebc353-7ee1-4c1d-9461-40701542a8f7"}],"parameters":[{"name":"Text","value":"Welcome to Amazon! I will get you to Omilia's Virtual assistant now.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":151,"y":542},"useDynamic":false}},{"id":"406d878c-83a9-461d-b616-620d3d65858c","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a427d3d8-058e-4f22-84e6-f28af4a226e4"},{"condition":"Error","transition":"ccebc353-7ee1-4c1d-9461-40701542a8f7"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:799962172530:function:OmiliaLambdaFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"cmd","value":"get_available_number","namespace":null}],"metadata":{"position":{"x":379,"y":417},"dynamicMetadata":{"cmd":false},"useDynamic":false},"target":"Lambda"},{"id":"37a9e127-524e-49a4-b965-12c39300f011","type":"PlayPrompt","branches":[{"condition":"Success","transition":"ccebc353-7ee1-4c1d-9461-40701542a8f7"},{"condition":"Error","transition":"ccebc353-7ee1-4c1d-9461-40701542a8f7"}],"parameters":[{"name":"Text","value":"An error occurred. Sorry. We will close the call","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":864,"y":720},"useDynamic":false}},{"id":"b23ff4a1-220a-42d6-abb9-bf015ec4aa8e","type":"Transfer","branches":[{"condition":"Success","transition":"1a2d36e1-bb9b-400b-bb5a-d462674b62f2"},{"condition":"CallFailure","transition":"e9c087e6-e5cd-4040-b916-645dc275dcea"},{"condition":"Timeout","transition":"e9c087e6-e5cd-4040-b916-645dc275dcea"},{"condition":"Error","transition":"e9c087e6-e5cd-4040-b916-645dc275dcea"}],"parameters":[{"name":"TimeLimit","value":"30"},{"name":"BlindTransfer","value":false},{"name":"PhoneNumber","value":"omilia_number","namespace":"User Defined"}],"metadata":{"position":{"x":837,"y":214}},"target":"PhoneNumber"},{"id":"e9c087e6-e5cd-4040-b916-645dc275dcea","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"37a9e127-524e-49a4-b965-12c39300f011"},{"condition":"Error","transition":"37a9e127-524e-49a4-b965-12c39300f011"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:799962172530:function:OmiliaLambdaFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"cmd","value":"clean_number","namespace":null},{"name":"Parameter","key":"DNIS","value":"omilia_number","namespace":"User Defined"}],"metadata":{"position":{"x":1107,"y":522},"dynamicMetadata":{"cmd":false,"DNIS":true},"useDynamic":false},"target":"Lambda"},{"id":"1a2d36e1-bb9b-400b-bb5a-d462674b62f2","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"2c3db8f6-63f5-414b-89b8-0f9c1b48bb8c"},{"condition":"Error","transition":"2c3db8f6-63f5-414b-89b8-0f9c1b48bb8c"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:799962172530:function:OmiliaLambdaFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"cmd","value":"get_attached_data","namespace":null},{"name":"Parameter","key":"DNIS","value":"omilia_number","namespace":"User Defined"}],"metadata":{"position":{"x":1077,"y":128},"dynamicMetadata":{"cmd":false,"DNIS":true},"useDynamic":false},"target":"Lambda"},{"id":"2c3db8f6-63f5-414b-89b8-0f9c1b48bb8c","type":"SetAttributes","branches":[{"condition":"Success","transition":"9b13c6bd-68c3-4af4-bfc5-6c6f1bbceae7"},{"condition":"Error","transition":"9b13c6bd-68c3-4af4-bfc5-6c6f1bbceae7"}],"parameters":[{"name":"Attribute","value":"Intent","key":"omilia_intent","namespace":"External"},{"name":"Attribute","value":"Customer Number","key":"caller_ani","namespace":"System"}],"metadata":{"position":{"x":1299,"y":107},"dynamicParams":["omilia_intent","caller_ani"]}},{"id":"9b13c6bd-68c3-4af4-bfc5-6c6f1bbceae7","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"896b4924-5af5-47a3-94a2-070aa1c8be30"},{"condition":"Error","transition":"896b4924-5af5-47a3-94a2-070aa1c8be30"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:799962172530:function:OmiliaLambdaFunction","namespace":null},{"name":"TimeLimit","value":"3"},{"name":"Parameter","key":"cmd","value":"clean_number","namespace":null},{"name":"Parameter","key":"DNIS","value":"omilia_number","namespace":"User Defined"}],"metadata":{"position":{"x":1520,"y":102},"dynamicMetadata":{"cmd":false,"DNIS":true},"useDynamic":false},"target":"Lambda"},{"id":"896b4924-5af5-47a3-94a2-070aa1c8be30","type":"PlayPrompt","branches":[{"condition":"Success","transition":"9d278512-3b3a-4aeb-b4da-0f26c817a8d6"},{"condition":"Error","transition":"9d278512-3b3a-4aeb-b4da-0f26c817a8d6"}],"parameters":[{"name":"Text","value":"Intent gathered by Omilia is:","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1742,"y":107},"useDynamic":false}},{"id":"9d278512-3b3a-4aeb-b4da-0f26c817a8d6","type":"PlayPrompt","branches":[{"condition":"Success","transition":"db1078cb-f978-482e-a249-610ee63b338e"},{"condition":"Error","transition":"db1078cb-f978-482e-a249-610ee63b338e"}],"parameters":[{"name":"Text","value":"omilia_intent","namespace":"User Defined"},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1961,"y":109},"useDynamic":true}},{"id":"444aecb4-ca19-4727-b3ac-459bc24a27b3","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"12810143-99ba-4235-83e9-1fef8886b8ab"},{"condition":"Error","transition":"12810143-99ba-4235-83e9-1fef8886b8ab"}],"parameters":[],"metadata":{"position":{"x":2392,"y":111},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"db1078cb-f978-482e-a249-610ee63b338e","type":"SetQueue","branches":[{"condition":"Success","transition":"444aecb4-ca19-4727-b3ac-459bc24a27b3"},{"condition":"Error","transition":"12810143-99ba-4235-83e9-1fef8886b8ab"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:799962172530:instance/3896014a-f7c8-44fe-aefc-23e0d2c48efe/queue/96c86fcb-e20c-45c5-a4f7-439cdfbc07be","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":2183,"y":116},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:799962172530:instance/3896014a-f7c8-44fe-aefc-23e0d2c48efe/queue/96c86fcb-e20c-45c5-a4f7-439cdfbc07be","text":"BasicQueue"}}},{"id":"12810143-99ba-4235-83e9-1fef8886b8ab","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2610,"y":354}}}],"version":"1","start":"a677fae7-dd0d-412d-a5e7-1d7c5036a347","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"Omilia_Integration_Test","description":null,"type":"contactFlow","status":"published","hash":"d762d4fc84825b1c021591b5b217b42ed57620271c50636b64ed2313063c5dc4"},"type":"contactFlow"}